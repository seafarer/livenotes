---
import { clsx } from 'clsx';

export interface Props {
  variant?: 'link' | 'button';
  style?: 'primary' | 'secondary' | 'subtle' | 'outline' | 'ghost' | 'danger';
  size?: 'small' | 'medium' | 'large';
  href?: string;
  text: string;
  class?: string;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
  target?: '_blank' | '_self' | '_parent' | '_top';
  rel?: string;
}

const {
  variant = 'button',
  style = 'primary',
  size = 'medium',
  href,
  text,
  class: className = '',
  type = 'button',
  disabled = false,
  target,
  rel,
} = Astro.props;

const baseClasses = [
  'inline-block',
  'font-medium',
  'transition-colors',
  'duration-200',
  'cursor-pointer',
  'border-none',
  'uppercase',
  'disabled:cursor-not-allowed',
];

const styleClasses = {
  primary: [
    'bg-blue-600',
    'text-white',
    'hover:bg-blue-700',
    'disabled:bg-gray-500',
    'disabled:hover:bg-gray-500',
  ],
  secondary: [
    'bg-gray-600',
    'text-white',
    'hover:bg-gray-700',
    'disabled:bg-gray-400',
    'disabled:hover:bg-gray-400',
  ],
  subtle: [
    'bg-white',
    'text-black',
    'hover:bg-white',
    'disabled:bg-gray-100',
    'disabled:text-gray-400',
    'disabled:hover:bg-gray-100',
  ],
  outline: [
    'bg-transparent',
    'text-blue-600',
    'border-2',
    'border-blue-600',
    'hover:bg-blue-50',
    'disabled:border-gray-300',
    'disabled:text-gray-400',
    'disabled:hover:bg-transparent',
  ],
  ghost: [
    'bg-transparent',
    'text-gray-700',
    'hover:bg-gray-100',
    'disabled:text-gray-400',
    'disabled:hover:bg-transparent',
  ],
  danger: [
    'bg-red-600',
    'text-white',
    'hover:bg-red-700',
    'disabled:bg-gray-500',
    'disabled:hover:bg-gray-500',
  ],
};

const sizeClasses = {
  small: ['text-sm', 'py-1', 'px-2', 'rounded-md'],
  medium: ['text-base', 'py-2', 'px-4', 'rounded-lg'],
  large: ['text-lg', 'py-3', 'px-6', 'rounded-lg'],
};

const buttonClasses = [
  ...baseClasses,
  ...styleClasses[style],
  ...sizeClasses[size],
];
const linkClasses = [
  ...baseClasses,
  ...styleClasses[style],
  ...sizeClasses[size],
  'no-underline',
];
---

{
  variant === 'link' && href ? (
    <a
      href={href}
      class:list={[clsx(linkClasses), className]}
      target={target}
      rel={rel}
    >
      {text}
    </a>
  ) : (
    <button
      type={type}
      disabled={disabled}
      class:list={[clsx(buttonClasses), className]}
    >
      {text}
    </button>
  )
}
